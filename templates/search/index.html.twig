{% extends 'search/base.html.twig' %}

{% block title %}{{ objSearch.title ~ ' - ' ~ 'page.search.title.page'|trans({'%current%': objSearch.results.page, '%total%': objSearch.results.pageTotal}) }}{% endblock %}

{% block searchextended %}
	<div class="row justify-content-sm-between">
		<div class="col-12 col-sm-auto">
			{% include "search/blocs-searchextended/search-corrector.html.twig" with {'suggestionList': objSearch.results.suggestionList} %}
		</div>
		
		<div class="col-auto">
			{% include "search/blocs-searchextended/related-topics.html.twig" with {'linkedSubjects': objSearch.results.linkedSubjects} %}
		</div>

		<div class="col-auto">
			{% include "search/blocs-searchextended/relaunch-search.html.twig" %}
		</div>
	</div>

	<div class="row mb-3">
		<div class="col-12 col-sm-10 pr-sm-0">
			{% include "search/blocs-searchextended/filters-search.html.twig"   %}
		</div>

		<div class="col-12 col-sm-2 pl-sm-0">
			<div class="search-refine">
				<button class="search-refine__button" type="button" data-target="#modal-refine-search" data-toggle="modal">Affiner<span class="sr-only"> la recherche</span></button>
				<!-- Include modal des filtres - Affiner -->
				{% include "search/modal/refine-search.html.twig" with {'facets': objSearch.results.facets} %}
			</div>
		</div>
	</div>
{% endblock %}

{% block body %}

	<div class="list-result">
		{% include "search/blocs-results/list-authorities.html.twig" %}
    </div>

	<div class="row">
		{# Include Nombre item #}
		{% include "search/blocs-results/search-header.html.twig" %}
	</div>
    {% block result %}
		<div class="row">

            {% set pagesTotal = objSearch.results.pageTotal %}

            {% if seeAll in ['rayon', 'all'] or seeAll is null %}
				{% set pagesTotal = objSearch.results.notices.totalCount %}
				<div class="col-12 col-md-6 pr-md-0">
					{% include 'search/blocs-results/docs-container.html.twig' with { 'type': 'rayon', 'notices': objSearch.results.notices} %}
				</div>
			{% endif %}
            {% if seeAll in ['online', 'all'] or seeAll is null %}
                {% set pagesTotal = objSearch.results.noticesOnline.totalCount %}
				<div class="col-12 col-md-6 pl-md-0">
					{% include 'search/blocs-results/docs-container.html.twig' with {'type': 'online', 'notices': objSearch.results.noticesOnline} %}
				</div>
			{% endif %}
		</div>
		<div class="row">
			{# Include Pagination #}
			{% include "search/blocs-results/search-footer.html.twig" with {'criteria':objSearch.results.criteria, 'pagesTotal': pagesTotal, 'page':  objSearch.results.page} %}
		</div>
	{% endblock %}

	<!-- Include modal formulaire pour Ãªtre prevenu du retour du document en rayon -->
	{% include "search/modal/notified-form.html.twig" %}
{% endblock %}
