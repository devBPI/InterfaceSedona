{% macro image(object, includeImage) %}
    {% if includeImage %}
        {% set type = object.type|slugify %}
        {% if object.image is defined %}
            {% set imgPath = object.image is not empty ? path('binary_image', {'content':object.image, 'type': object.type | slugify}) : asset(object.defaultImage) %}
        {% else %}
            {% set imgPath = asset('images/types/type-' ~ type ~ '.png') %}
        {% endif %}
        <img src="{{ absolute_url(imgPath) }}" alt="" class="img-fluid print__image" />
    {% endif %}
{% endmacro %}

{% macro list_objects(listObjects, includeImage, detailTemplate, isPrintLong, startIndex = 0) %}
    {% from 'common/macros/print-macro.html.twig' import image %}

    {% if listObjects is defined and listObjects is iterable %}
        {% for element in listObjects %}
            <div class="print__item">
                <h2 class="n1">{{ (loop.index + startIndex) ~ ') ' ~ element.printTitle }}</h2>

                <div>
                    {{ image(element, includeImage) }}

                    <ul class="print__list">
                        {% include detailTemplate with {'notice': element, 'format':'pdf'} %}
                    </ul>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endmacro %}

{% macro list_subitems(listItems, includeImage) %}
    {% if listItems is defined and listItems is iterable %}
        {% from 'common/macros/print-macro.html.twig' import image %}
        {% for item in listItems %}
            <div class="print__item">
                <h2 class="n1">{{ loop.index ~')'}} {{ item.title }}</h2>

                <div>
                    {{ image(item, includeImage) }}

                    <ul class="print__list">
                        {{ item.authors|join(', ') }}
                    </ul>
                </div>
            </div>
        {% endfor %}
    {% endif %}
{% endmacro %}

{% macro availibility_access_to_bpi(object, notice, format='pdf' ) %}
    {% if is_same_instance(object, "App\\Model\\Link") %}
        {% set objTitle = 'bloc.notice-simple.access'|trans %}
        {% if object.title is not empty %}
            {% set objTitle =  'bloc.notice-simple.access-to-bdd'|trans ~ ' ' ~ object.title %}
        {% endif %}

        {% if object.media is defined and object.media is not empty %}
            {% if format == 'pdf' %}
            <li >
            {% endif %}
                {% if notice.type is defined and (notice.type == 'Formation' or notice.type == 'Débat et enregistrement' or notice.type == 'Livre audio' or notice.type == 'Musique') %}
                        {% if object.cote is defined and object.cote is not empty %}
                            {{ object.cote}}
                        {% endif %}
                  {#  <!-- saut de page- !> #}
                        {% if object.localisation is defined and object.localisation is not empty and object.categorie is defined and object.categorie is not empty %}
                            {{ object.localisation }} - {{object.categorie}}
                        {% endif %}

                {% endif %}
            {% if format == 'pdf' %}
                </li>
            {% else %}
                {{  "\n" }}
            {% endif %}
                {% elseif object.url is defined and object.url is not empty %}
                    {% if format == 'pdf' %}
                        <li >
                    {% else %}
                        {{  "\n" }}
                    {% endif %}
                {% if notice.type is defined and (notice.type == 'Formation' or notice.type == 'Débat et enregistrement' or notice.type == 'Livre audio' or notice.type == 'Musique') %}
                        {% if object.cote is defined and object.cote is not empty %}
                            {{ object.cote}}
                        {% endif %}
                {# <!-- saut de page !> #}
                        {% if object.localisation is defined and object.localisation is not empty and object.categorie is defined and object.categorie is not empty %}
                            {{ object.localisation }} - {{object.categorie}}
                        {% endif %}

                {% endif %}
                    {% if format == 'pdf' %}

                        </li>
                    {% else %}
                        {{  "\n" }}
                    {% endif %}
                {% else %}
            {% if format == 'pdf' %}
                <li >
            {% endif %}
                    {{ 'bloc.notice-simple.access-to-bpi'|trans }}
            {% if format == 'pdf' %}
                </li>
            {% else %}
                {{  "\n" }}
            {% endif %}
        {% endif %}

    {% endif %}
{% endmacro %}
