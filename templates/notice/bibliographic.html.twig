{% extends 'search/base.html.twig' %}

{% block title %}{{ 'page.bibiographic.title'|trans({'%title%': object.notice.titles[0]}) }}{% endblock %}
{% block body %}
	<div class="d-none">
		{% include 'search/blocs-results/docs-detail.html.twig' with {'notice': object.notice, 'type': 'Notice', 'index': 0, 'mode': 'detail'} %}
	</div>
	<div class="bibliographic-result">
		<div class="row justify-content-between">
			{% include "record/blocs/results-navigation.html.twig" with {'routeTarget': path('record_bibliographic',{"permalink":object.notice.permalink}) } %}
		</div>
		<div class="row">
			{% include "notice/detail-bibliographic.html.twig"  with {'notice': object.notice, 'object':object } %}
		</div>
		{% if object.noticesSameTheme %}
		<hr class="hr-double border-double mt-0">
		<div class="row">
			<div id="carousel-theme" class="carousel carousel--secondary {{ class|default('') }} col-12">
				<div class="carousel__header">
					<h2 class="n1">{{ 'bloc.list-related-documents.carousel-theme'|trans }}</h2>
				</div>
				<div class="carousel-wrapper">
					<div class="slick-carousel js-carousel-secondary" role="region" aria-roledescription="carrousel">
                        {% for object in object.noticesSameTheme.noticesList %}
							<div class="carousel__slide">
								<a href="{{ path('record_bibliographic', {'permalink': object.permalink}) }}" class="carousel__slide-link">
									<span class="sr-only">
										{{ object.titles[0] }}
									</span>
								</a>
								<div class="carousel__slide-image">
									<img src="{{ path('binary_image', {'content':object.image, 'type': object.type|slugify}) }}" class="img-fluid" alt="" />
								</div>
								<p class="n1 carousel__slide-title">{{object.titles[0]}}</p>
								<p class="n2 carousel__slide-subtitle">
									{% for author in object.authors %}
										{{ author}}
									{% endfor %}
								</p>
							</div>
                        {% endfor %}
					</div>
				</div>
				<div class="carousel__footer">
					<a href="{{ path('search', {(constant('App\\Model\\Search\\Criteria::SIMPLE_SEARCH_KEYWORD')):notice.indice, (constant('App\\Model\\Search\\Criteria::SIMPLE_SEARCH_TYPE')):(constant('App\\WordsList::INDICE_COTE_WORD'))}) }}" class="link link--icone-end">
						{{ "bloc.list-related-documents.see-more"|trans }}
						<span class="sr-only">{{ "bloc.list-related-documents.see-more-sr-only"|trans }} </span>
						<span>({{ object.results}})</span>
						<img src="{{ asset('images/icones/icone-chevron-gauche.svg') }}" alt="" class="icone-chevron-right"/>
					</a>
				</div>
			</div>
		</div>
		{% endif %}
	</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    {% if app.environment != 'test' %}
        {{ encore_entry_script_tags('carousel') }}
    {% endif %}
{% endblock %}
